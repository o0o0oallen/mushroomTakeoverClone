window.__require=function e(t,o,i){function n(s,l){if(!o[s]){if(!t[s]){var d=s.split("/");if(d=d[d.length-1],!t[d]){var r="function"==typeof __require&&__require;if(!l&&r)return r(d,!0);if(a)return a(d,!0);throw new Error("Cannot find module '"+s+"'")}s=d}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){return n(t[s][1][e]||e)},c,c.exports,e,t,o,i)}return o[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({HallScene:[function(e,t,o){"use strict";cc._RF.push(t,"3ec91fYiHxOdIxHIsuVLihI","HallScene");var i=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,o,s):n(t,o))||s);return a>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const n=e("../../Script/Base/BaseScene"),a=e("../../Script/Enum"),s=e("../../Script/Interface/ITask"),l=e("../../Script/Manager/MAd"),d=e("../../Script/Manager/MAudio"),r=e("../../Script/Manager/MBundle"),c=e("../../Script/Manager/MConfig"),g=e("../../Script/Manager/MDialog"),h=e("../../Script/Manager/MEvent"),M=e("../../Script/Manager/MI18n"),p=e("../../Script/Manager/MItem"),u=e("../../Script/Manager/MModel"),m=e("../../Script/Manager/MPool"),f=e("../../Script/Manager/MToast"),v=e("../../Script/Manager/MTween"),B=e("../../Script/Temporary"),{ccclass:A,property:C}=cc._decorator;var S,E,y;(function(e){e.Hero7001="Hero/res/texture/autoatlas/hero/7001",e.Hero7002="Hero/res/texture/autoatlas/hero/7002",e.Hero7003="Hero/res/texture/autoatlas/hero/7003",e.Hero7004="Hero/res/texture/autoatlas/hero/7004",e.Hero7005="Hero/res/texture/autoatlas/hero/7005",e.Hero7006="Hero/res/texture/autoatlas/hero/7006",e.Hero7007="Hero/res/texture/autoatlas/hero/7007",e.Hero7008="Hero/res/texture/autoatlas/hero/7008",e.Hero7009="Hero/res/texture/autoatlas/hero/7009",e.Hero7010="Hero/res/texture/autoatlas/hero/7010",e.Hero7011="Hero/res/texture/autoatlas/hero/7011",e.Hero7012="Hero/res/texture/autoatlas/hero/7012",e.Hero7013="Hero/res/texture/autoatlas/hero/7013",e.Hero7014="Hero/res/texture/autoatlas/hero/7014",e.Hero7015="Hero/res/texture/autoatlas/hero/7015",e.Hero7016="Hero/res/texture/autoatlas/hero/7016",e.Hero7017="Hero/res/texture/autoatlas/hero/7017"})(S||(S={})),function(e){e.BookNormal="res/texture/autoAtlas/benzi01",e.BookInfernal="res/texture/autoAtlas/benzi05"}(E||(E={})),function(e){e.PageUpNormal="res/spine/PageUpNormal/skeleton",e.PageUpInfernal="res/spine/PageUpInfernal/skeleton"}(y||(y={}));let k=class extends n.default{constructor(){super(...arguments),this.debuge=null,this.top=null,this.pageSkeleton=null,this.pageUpSkeleton=null,this.lbStrength=null,this.lbCoin=null,this.lbGemstone=null,this.lbDiamond=null,this.srengthCountdown=null,this.strengthStart=null,this.strengthEnd=null,this.btnTurnLeft=null,this.pageTouch=null,this.lbChapterLevel=null,this.editboxLevel=null,this.gameModel=null,this.chapter=null,this.loading=null,this.guide=null,this.ndBtnBlindBox=null,this.guideHand=null,this.ndBtnSelectHeros=[],this.displayHero=null,this.ksMoveBtns=[],this.ndBtnSignIn=null,this.ndEnBtnSignIn=null,this.statickBook=null,this.changeModel=null,this.turnPage=null,this.bookmark=null,this.ndBtnMoreGame=null,this.ndBtnAddDesktop=null,this.ndBtnSelectHero=null,this.ndBtnStartGames=null,this.ndBtnModels=null,this.ndBtnTask=null,this.ndEnBtnTask=null,this.ifHandTip=null,this.ndBtnRnak=null,this.menu=null,this.ndBtnMenu=null,this.ndBtnCloseMenu=null,this.selectHeroSiwtch=null,this.noAds=null,this.ndBtnFirstImpulse=null,this.ndBtnTimeLimit=null,this.timeLimitCountDown=null,this.kwaiVideo=null,this.ndBtnSetting=null,this.ndBtnOverseasSetting=null,this.ndBtnActivity=null,this.ndBtnPass=null,this.ndBtnMineTower=null,this.ndBtnNewbieTask=null,this.newbieTaskSign=null,this.ndBtnPackage=null,this.menuBtnPackage=null,this.currentPage=0,this.touchStartPos=cc.Vec2.ZERO,this.pathPages=["res/spine/page1/skeleton","res/spine/page2/skeleton","res/spine/page3/skeleton","res/spine/page4/skeleton","res/spine/page5/skeleton","res/spine/page6/skeleton","res/spine/page7/skeleton","res/spine/page5/skeleton","res/spine/page4/skeleton","res/spine/page1/skeleton","res/spine/page4/skeleton","res/spine/page6/skeleton"],this.cnChapterNames=["\u6d77\u5c9b\u68ee\u6797","\u8352\u91ce\u6208\u58c1","\u70ed\u5e26\u96e8\u6797","\u6781\u5bd2\u51b0\u539f","\u79cb\u610f\u6765\u88ad","\u70bd\u70ed\u708e\u5730","\u9633\u5149\u6c99\u6ee9","\u559c\u5e86\u6625\u8282","\u51ac\u5b63\u4e4b\u65c5","\u6625\u65e5\u60ca\u559c","\u534e\u4e3d\u5723\u8bde","\u9ed1\u6697\u5c9b\u5c7f"],this.tcChapterNames=["\u6d77\u5cf6\u68ee\u6797","\u8352\u91ce\u6208\u58c1","\u71b1\u5e36\u96e8\u6797","\u6975\u5bd2\u51b0\u539f","\u79cb\u610f\u4f86\u8972","\u71be\u71b1\u708e\u5730","\u967d\u5149\u6c99\u7058","\u559c\u6176\u6625\u7bc0","\u51ac\u5b63\u4e4b\u65c5","\u6625\u65e5\u9a5a\u559c","\u83ef\u9e97\u8056\u8a95","\u9ed1\u6697\u5cf6\u5dbc"],this.enChapterNames=["Island Forest","Wild West","Amazon Forest","Ice Field","Autumn Forest","Volcano","Beach","Autumn Forest","Ice Field","Island Forest","Ice Field","Volcano"]}onEnable(){this.loading.zIndex=cc.macro.MAX_ZINDEX;let e=GA.PA.getSystemInfoSync();if("l"==Utils.screenSize()){let t=GA.PA.getMenuButtonBoundingClientRect();(null==t?void 0:t.top)?this.top.getComponent(cc.Widget).top=t.top*e.designPixelRatio:this.top.getComponent(cc.Widget).top=80}h.MEvent.on(h.EMsg.UpdateStrength,()=>{this.updateStrength()},this),h.MEvent.on(h.EMsg.UpdateCoin,()=>{this.updateCoin()},this),h.MEvent.on(h.EMsg.UpdateGemstone,()=>{this.updateGemstone()},this),h.MEvent.on(h.EMsg.UpdateDiamond,()=>{this.updateDiamond()},this),this.pageTouch.on(cc.Node.EventType.TOUCH_START,e=>{this.touchStartPos=e.getLocation()},this),this.pageTouch.on(cc.Node.EventType.TOUCH_END,e=>{let t=e.getLocationX()-this.touchStartPos.x;Math.abs(t)<=30?u.MModel.Battle.gameModel==a.EGameModel.Infernal&&(GA.sentLogs([{eventId:"\u9996\u9875\u5730\u72f1\u6a21\u5f0f\u70b9\u51fb\u9009\u62e9\u5173\u5361"}]),g.MDialog.showDialog(r.EDialog.LevelSelect,{data:{chapter:this.currentPage,useChapter:(this.currentPage-1)%this.pathPages.length+1}}),u.MModel.Common.clickSelectLevel=!0,this.ifHandTip.active=!1):t>=100?this.turnLeft():t<=-100&&this.turnRight()},this),h.MEvent.on(h.EMsg.CloseDialog,e=>{e!=r.EDialog.FreeCoin&&e!=r.EDialog.FreeStrength&&e!=r.EDialog.FreeGemstone&&e!=r.EDialog.Hero&&e!=r.EDialog.Rank&&e!=r.EDialog.Pass||(this.showHallBanner(),this.showHallCustomAd()),e!=r.EDialog.Hero&&e!=r.EDialog.BlindBox||g.MDialog.dialogMap.has(r.EDialog.Hero)||g.MDialog.dialogMap.has(r.EDialog.BlindBox)||this.showInterstitialAd()},this),h.MEvent.on([h.EMsg.ReplaceHero,h.EMsg.UseHeroSkin],()=>{this.updateSeclectHeroInfo()},this),h.MEvent.on(h.EMsg.ShowBlindBoxGuide,()=>{u.MModel.Battle.gameEvent!=a.EGameEvent.None||u.MModel.Guide.completeBlindBoxGuide||(GA.sentLogs([{eventId:"\u5f00\u59cb\u6253\u5f00\u76f2\u76d2\u5f15\u5bfc"}]),this.guide.active=!0,this.ndBtnBlindBox.setPosition(cc.v2()),this.guideHand.setPosition(cc.v2(280,345)),this.guideHand.active=!1,cc.tween(this.ndBtnBlindBox).to(1,{position:cc.v3(274,364)}).call(()=>{this.guideHand.active=!0,cc.tween(this.guideHand).by(.3,{position:cc.v3(0,50)}).by(.3,{position:cc.v3(0,-50)}).union().repeatForever().start()}).start())},this),h.MEvent.on(h.EMsg.TryPlayGame,()=>{const e=()=>{d.MAudio.stopBG(),r.MBundle.loadScene({bundle:r.EBundle.Game,scene:r.EScene.GameScene,onBeforeLoadScene:()=>{g.MDialog.clear(),!GA.Info.isPreview&&GA.isPlatform([GA.Platform.WeChat,GA.Platform.QQ,GA.Platform.Kuaidianwan,GA.Platform.Android])&&GA.hideBanner(),h.MEvent.emit(h.EMsg.HideCustomAdR)},onLaunched:()=>{B.Temporary.currentScene=r.EScene.GameScene}})};u.MModel.Battle.gameModel==a.EGameModel.Normal?c.MConfig.Config.SwitchTrialSkill&&u.MModel.Battle.level>1?g.MDialog.showDialog(r.EDialog.TrialSkill,{data:e}):e():u.MModel.Battle.gameModel==a.EGameModel.Infernal&&(c.MConfig.Config.SwitchTrialSkill&&u.MModel.Battle.ifUseLevel>1?g.MDialog.showDialog(r.EDialog.TrialSkill,{data:e}):e())},this),h.MEvent.on(h.EMsg.SignIn,()=>{let e=this.updateBtnStatusSign(),t=this.updateBtnStatusTask();this.ndBtnMenu.children[0].active=!(!e&&!t)},this),h.MEvent.on(h.EMsg.TaskChange,()=>{let e=this.updateBtnStatusSign(),t=this.updateBtnStatusTask();this.ndBtnMenu.children[0].active=!(!e&&!t)},this),h.MEvent.on(h.EMsg.RefreshHallScene,()=>{this.updateStrength(),this.updateCoin(),this.updateGemstone(),this.updateDiamond();let e=this.updateBtnStatusSign(),t=this.updateBtnStatusTask();if(this.ndBtnMenu.children[0].active=!(!e&&!t),this.updateSeclectHeroInfo(),u.MModel.Battle.gameModel==a.EGameModel.Infernal)if(-1!=u.MModel.Battle.ifUseLevel){let e=u.MModel.Battle.getChapterByLevel(u.MModel.Battle.ifUseLevel);this.loadPage(e)}else this.loadPage();else this.loadPage();this.ndBtnCloseMenu.active=!1,cc.tween(this.menu).to(.3,{position:cc.v3(-464,0)}).call(()=>{this.ndBtnMenu.active=!0}).start()},this),h.MEvent.on(h.EMsg.ReceivedActivityReward,()=>{this.updateBtnActivity()},this),h.MEvent.on(h.EMsg.NoAd,()=>{this.noAds.active=!1},this),h.MEvent.on(h.EMsg.GetNoAdInfo,()=>{""==c.MConfig.PurchaseGoods.no_ad.productId||u.MModel.Gift.noAd?this.noAds.active=!1:this.noAds.active=!0},this),h.MEvent.on(h.EMsg.GetFirstImpulseReward,()=>{this.ndBtnFirstImpulse.active=!1},this),h.MEvent.on(h.EMsg.GetTimeLimitReward,()=>{this.ndBtnTimeLimit.active=!1},this),h.MEvent.on(h.EMsg.ReceivePassReward,()=>{this.updatePassInfo()},this),h.MEvent.on([h.EMsg.ReceiveNewbieTask,h.EMsg.ReceiveNewbieTaskBox,h.EMsg.UplevelHero,h.EMsg.UpdateGemstone,h.EMsg.ExtractPrize],()=>{this.updateNewbieTaskSign()},this),h.MEvent.on(h.EMsg.AddDesktopSuccess,()=>{this.ndBtnAddDesktop.active=!1},this),GA.sentLogs([{eventId:"EnterHome"}]),GA.isPlatform(GA.Platform.Kwaigame)&&-1==GA.PA.getSystemInfoSync().platform.toLocaleLowerCase().indexOf("ios")&&this.ksMoveBtns.forEach(e=>{e.x+=60}),GA.Info.isPreview||"android_mgct_abroad_weiyou"!=GA.Info.appId||jsb.reflection.callStaticMethod("com.minigame.minicloudsdk.MiniGameSdk","showCrossPromotionAd","(FFZ)V",50,80,!1)}start(){var e;super.start(),r.MBundle.preloadScene({bundle:r.EBundle.Game,scene:r.EScene.GameScene,onProgress:()=>{}}),c.MConfig.Debug?this.debuge.active=!0:this.debuge.active=!1,B.Temporary.loadSceneLoaded=!0,this.updateStrength(),this.updateCoin(),this.updateGemstone(),this.updateDiamond(),this.showHallBanner(),this.showHallCustomAd(),this.showInterstitialAd(),this.updateNewbieTaskSign();let t=this.updateBtnStatusSign(),o=this.updateBtnStatusTask();if(this.ndBtnMenu.children[0].active=!(!t&&!o),this.updateBtnActivity(),this.updateSeclectHeroInfo(),GA.isPlatform(GA.Platform.OPPO)?this.scheduleOnce(()=>{d.MAudio.playBG(d.EAudio.HallBGM,!0)},1):d.MAudio.playBG(d.EAudio.HallBGM,!0),u.MModel.Battle.gameModel==a.EGameModel.Infernal)if(-1!=u.MModel.Battle.ifUseLevel){let e=u.MModel.Battle.getChapterByLevel(u.MModel.Battle.ifUseLevel);this.loadPage(e)}else this.loadPage();else this.loadPage();!GA.Info.isPreview&&GA.isPlatform([GA.Platform.QQ])&&((null===(e=window.qq)||void 0===e?void 0:e.isColorSignExistSync())||window.qq.addColorSign()),"inland"==c.MConfig.Region&&(GA.isPlatform([GA.Platform.OPPO])||GA.isPlatform(GA.Platform.Android)&&GA.Info.distributionChannel==GA.DistributionChannel.OPPO)?this.ndBtnMoreGame.active=!0:this.ndBtnMoreGame.active=!1,c.MConfig.Config.MineTowerFunc?this.ndBtnMineTower.active=!0:this.ndBtnMineTower.active=!1,B.Temporary.preloaded||GA.isPlatform(GA.Platform.Hago)||(B.Temporary.preloaded=!0,this.preloadDialogRes(["TrialSkill","Guide"],()=>{this.preloadBattleRes(["res/texture/bg","res/prefab","res/texture/autoatlas/city","res/texture/autoatlas/baseBg","res/texture/autoatlas/decorate","res/texture/autoatlas/block","res/texture/autoatlas/connectFill","res/texture/autoatlas/soldier","res/texture/autoatlas/arrow","res/spine/repair","res/spine/skill","res/spine/occupy"],()=>{this.preloadDialogRes(["Hero","BlindBox","BlindBoxPrize","NewbieTask","SignIn","Pause","Over","GameRecorder","OverBox","NewYear","Pass","FreeCoin","FreeStrength","FreeGemstone","Store"])})})),r.MBundle.load({bundle:r.EBundle.Hall,path:u.MModel.Battle.gameModel==a.EGameModel.Normal?E.BookNormal:E.BookInfernal,type:cc.SpriteFrame,onComplete:e=>{this.statickBook.spriteFrame=e}}),u.MModel.Battle.gameModel==a.EGameModel.Normal?this.setNormalModel():u.MModel.Battle.gameModel==a.EGameModel.Infernal&&this.setInfernalModel();let i=!1,n=new Date;if(new Date(c.MConfig.Activity.startTime[0],c.MConfig.Activity.startTime[1]-1,c.MConfig.Activity.startTime[2]).getTime()<=n.getTime()&&new Date(c.MConfig.Activity.endTime[0],c.MConfig.Activity.endTime[1]-1,c.MConfig.Activity.endTime[2]+1).getTime()>=n.getTime()){this.ndBtnPass.active=!0;let e=this.ndBtnPass.getChildByName("name").getComponent(cc.Label),t=c.MConfig.TableI18n.get(122001);"cn"==c.MConfig.Language?e.string=t.cn:"tc"==c.MConfig.Language?e.string=t.tc:"pt"==c.MConfig.Language?e.string=t.pt:"vi"==c.MConfig.Language?e.string=t.vi:"id"==c.MConfig.Language?e.string=t.in:e.string=t.en,this.ndBtnActivity.active=!1,i=!0,"cn"==c.MConfig.Language?this.ndBtnActivity.getComponent(sp.Skeleton).setAnimation(0,"cn",!0):"tc"==c.MConfig.Language?this.ndBtnActivity.getComponent(sp.Skeleton).setAnimation(0,"fan",!0):"pt"==c.MConfig.Language?this.ndBtnActivity.getComponent(sp.Skeleton).setAnimation(0,"putao",!0):"vi"==c.MConfig.Language?this.ndBtnActivity.getComponent(sp.Skeleton).setAnimation(0,"yuenan",!0):"id"==c.MConfig.Language?this.ndBtnActivity.getComponent(sp.Skeleton).setAnimation(0,"yinni",!0):this.ndBtnActivity.getComponent(sp.Skeleton).setAnimation(0,"en",!0),this.updatePassInfo()}else this.ndBtnPass.active=!1,this.ndBtnActivity.active=!1,i=!1;let s=()=>{u.MModel.Battle.gameEvent==a.EGameEvent.NewYear&&i?g.MDialog.showDialog(r.EDialog.NewYear,{}):u.MModel.Battle.gameEvent==a.EGameEvent.MothersDay&&i&&g.MDialog.showDialog(r.EDialog.MothersDay,{})};if("inland"!=c.MConfig.Region||c.MConfig.Hago){if("overseas"==c.MConfig.Region||c.MConfig.Hago){(c.MConfig.Transsion||c.MConfig.Hago)&&(this.ndBtnOverseasSetting.active=!1),this.ndBtnMenu.active=!0,this.ndBtnRnak.active=!1,this.ndBtnSignIn.active=!1,this.ndBtnTask.active=!1,this.lbDiamond.node.parent.active=!1,"android_mgct_abroad_weiyou"==GA.Info.appId?(this.ndBtnOverseasSetting.active=!1,this.ndBtnSetting.active=!0):this.ndBtnSetting.active=!1,""==c.MConfig.PurchaseGoods.no_ad.productId||u.MModel.Gift.noAd?this.noAds.active=!1:this.noAds.active=!0;let e=()=>{u.MModel.UserData.dayFirstLogin?!u.MModel.Gift.firstImpulseComplete&&c.MConfig.AppProxyConfig.Inited?(g.MDialog.showDialog(r.EDialog.FirstImpulse,{}),console.log("\u5f39\u51fa\u9996\u51b2\u5f39\u7a97\uff01")):!u.MModel.Gift.timeLimitComplete&&c.MConfig.AppProxyConfig.Inited&&(g.MDialog.showDialog(r.EDialog.TimeLimit,{}),console.log("\u5f39\u51fa\u9650\u65f6\u793c\u5305\u5f39\u7a97\uff01")):s()};u.MModel.UserData.dayNewUser,0!=B.Temporary.playGameCount&&B.Temporary.playGameCount%20==0?e():s(),u.MModel.Gift.firstImpulseComplete?this.ndBtnFirstImpulse.active=!1:"android_mgct_abroad_weiyou"==GA.Info.appId?1==c.MConfig.PurchaseGoods.inited?(this.ndBtnFirstImpulse.active=!0,v.MTween.swing(this.ndBtnFirstImpulse.getChildByName("gift_hezi"))):this.ndBtnFirstImpulse.active=!1:(this.ndBtnFirstImpulse.active=!0,v.MTween.swing(this.ndBtnFirstImpulse.getChildByName("gift_hezi"))),u.MModel.Gift.timeLimitComplete?this.ndBtnTimeLimit.active=!1:"android_mgct_abroad_weiyou"==GA.Info.appId?1==c.MConfig.PurchaseGoods.inited?this.ndBtnTimeLimit.active=!0:this.ndBtnTimeLimit.active=!1:this.ndBtnTimeLimit.active=!0,"android_mgct_abroad_weiyou"==GA.Info.appId?(this.menuBtnPackage.active=!1,1==c.MConfig.PurchaseGoods.inited?this.ndBtnPackage.active=!0:this.ndBtnPackage.active=!1):(this.menuBtnPackage.active=!0,this.ndBtnPackage.active=!1)}}else this.ndBtnMenu.active=!1,c.MConfig.Hago||GA.isPlatform(GA.Platform.WeiYouH5)?this.ndBtnRnak.active=!1:this.ndBtnRnak.active=!0,this.ndBtnSignIn.active=!0,this.ndBtnTask.active=!0,this.lbDiamond.node.parent.active=!1,this.noAds.active=!1,this.ndBtnFirstImpulse.active=!1,this.ndBtnTimeLimit.active=!1,this.ndBtnPackage.active=!1,GA.isPlatform([GA.Platform.Android,GA.Platform.iOS,GA.Platform.QQ,GA.Platform.OPPO,GA.Platform.Vivo,GA.Platform.WeiYouH5])?this.ndBtnSetting.active=!0:this.ndBtnSetting.active=!1,s();0==this.ndBtnSetting.active&&(this.ndBtnRnak.x=-300),!GA.Info.isPreview&&GA.isPlatform(GA.Platform.ByteDance)?GA.PA.checkShortcut({success:e=>{e.status.exist?(console.log("\u5df2\u7ecf\u6dfb\u52a0\u5230\u684c\u9762\u4e86\uff01"),this.ndBtnAddDesktop.active=!1):(console.log("\u8fd8\u6ca1\u6dfb\u52a0\u5230\u684c\u9762\uff01"),this.ndBtnAddDesktop.active=!0,v.MTween.swing(this.ndBtnAddDesktop),u.MModel.Common.closeAddShortcutCount<c.MConfig.Config.ContinueCloseDontShow&&0!=B.Temporary.continueWinCount&&B.Temporary.continueWinCount%c.MConfig.Config.ContinueWinAddShortcut==0&&g.MDialog.showDialog(r.EDialog.AddShortcut,{}))},fail:()=>{}}):this.ndBtnAddDesktop.active=!1,GA.isPlatform(GA.Platform.Kwaigame)?GA.Info.underCheck||""==c.MConfig.KwaiHost||-1==c.MConfig.Config.KwaiHostWhiteList.indexOf(c.MConfig.KwaiHost)||0!=u.MModel.Common.KwaiVideoCheatCount||c.MConfig.BlackCity?this.kwaiVideo.active=!1:this.kwaiVideo.active=!0:GA.Info.underCheck||!GA.isPlatform(GA.Platform.ByteDance)||-1==c.MConfig.Config.ByteDanceHostWhiteList.indexOf(c.MConfig.appName)||0!=u.MModel.Common.KwaiVideoCheatCount||c.MConfig.BlackCity?this.kwaiVideo.active=!1:this.kwaiVideo.active=!0,u.MModel.UserData.checkNewbieTask()&&u.MModel.NewbieTask.surplusDuration()>0?(this.ndBtnNewbieTask.active=!0,this.schedule(()=>{u.MModel.NewbieTask.surplusDuration()<=0&&(this.ndBtnNewbieTask.active=!1)},1,cc.macro.REPEAT_FOREVER,.01)):this.ndBtnNewbieTask.active=!1,c.MConfig.Config.PlayTimeShowSignIn==u.MModel.UserData.dayPlayGameCount&&(u.MModel.SignIn.isSignIned||g.MDialog.showDialog(r.EDialog.SignIn,{data:u.MModel.SignIn}))}showInterstitialAd(){console.log("\u68c0\u6d4b\u5f39\u63d2\u5c4f\uff01");let e=(new Date).getTime();!GA.Info.isPreview&&u.MModel.Common.gameDuration>(u.MModel.UserData.newUser?c.MConfig.Config.NewPlayerItlAdPd:c.MConfig.Config.OldPlayerItlAdPd)&&e-B.Temporary.LastShowInterstitialAdTime>1e3*(u.MModel.UserData.newUser?c.MConfig.Config.NewPlayerItlAdRt:c.MConfig.Config.OldPlayerItlAdRt)&&(console.log("\u663e\u793a\u63d2\u5c4f!"),B.Temporary.LastShowInterstitialAdTime=e,this.scheduleOnce(()=>{if(GA.isPlatform([GA.Platform.Kwaigame]))console.log("\u8c03\u7528\u63d2\u5c4f\u63a5\u53e3\uff01"),GA.showInterstitialAd();else if(GA.isPlatform([GA.Platform.ByteDance])){if(e-B.Temporary.closeVideoTime>6e4)try{let e=window.tt.createInterstitialAd({adUnitId:"5rqhi521v4t1k30glp"});e.onLoad(()=>{e.show().then(()=>{console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u6210\u529f")})}),e.onError(()=>{console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25")}),e.onClose(()=>{e.destroy()}),e.load()}catch(t){}}else GA.isPlatform([GA.Platform.WeChat])&&l.MAd.showInterstitialAd()},.1))}updateNewbieTaskSign(){let e=u.MModel.NewbieTask.tasks.find(e=>e.tag==s.ETaskTag.NewbieTask&&(null==e?void 0:e.day)<=u.MModel.NewbieTask.day&&e.receiveStatus==a.EReceiveStatus.UnReceive),t=u.MModel.NewbieTask.tasks.find(e=>e.tag==s.ETaskTag.NewbieTaskBox&&e.receiveStatus==a.EReceiveStatus.UnReceive);this.newbieTaskSign.active=!(!e&&!t)}showHallBanner(){"l"==Utils.screenSize()&&!GA.Info.isPreview&&GA.isPlatform([GA.Platform.WeChat,GA.Platform.QQ,GA.Platform.Kuaidianwan,GA.Platform.Android])&&GA.showBanner()}showHallCustomAd(){c.MConfig.Config.CustomAd.HallR&&h.MEvent.emit(h.EMsg.ShowCustomAdL)}onEditBox(){parseInt(this.editboxLevel.string)&&(u.MModel.Battle.gameModel==a.EGameModel.Normal?u.MModel.Battle.level=parseInt(this.editboxLevel.string):u.MModel.Battle.gameModel==a.EGameModel.Infernal&&(u.MModel.Battle.ifLevel=parseInt(this.editboxLevel.string)))}preloadBattleRes(e,t){let o=e.shift();o?r.MBundle.preloadDir({bundle:r.EBundle.Battle,path:o,onComplete:()=>{console.log(`${r.EBundle.Battle}:${o}\u6587\u4ef6\u5939\u9884\u52a0\u8f7d\u5b8c\u6210`),this.preloadBattleRes(e,t)}}):null==t||t()}preloadDialogRes(e,t){let o=e.shift();o?r.MBundle.preloadDir({bundle:r.EBundle.Dialog,path:o,onComplete:()=>{console.log(`${r.EBundle.Dialog}:${o}\u6587\u4ef6\u5939\u9884\u52a0\u8f7d\u5b8c\u6210`),this.preloadDialogRes(e,t)}}):null==t||t()}loadPage(e){let t=u.MModel.Battle.getChapter(),o=null!=e?e:t;if(this.btnTurnLeft.node.active=1!=o,this.currentPage=o,console.log("this.currentPage:",this.currentPage),r.MBundle.load({bundle:r.EBundle.Hall,path:this.pathPages[(o-1)%this.pathPages.length],type:sp.SkeletonData,onComplete:e=>{this.pageSkeleton.skeletonData=e,this.pageSkeleton.node.active=!0,this.pageSkeleton.setAnimation(0,"chuxian",!1),this.pageSkeleton.setCompleteListener(()=>{this.pageSkeleton.setCompleteListener(null),this.pageSkeleton.setAnimation(0,"daiji",!0)})}}),u.MModel.Battle.gameModel==a.EGameModel.Normal){this.bookmark.active=!0,M.MI18n.showInfo(this.gameModel,100007),this.ifHandTip.active=!1;let e=u.MModel.Battle.getChapterSize(o);this.lbChapterLevel.string=o<t?`${e}/${e}`:`${u.MModel.Battle.getChapterLevel(u.MModel.Battle.level)}/${e}`}else if(u.MModel.Battle.gameModel==a.EGameModel.Infernal)if(this.bookmark.active=!1,M.MI18n.showInfo(this.gameModel,100008),u.MModel.Common.clickSelectLevel)this.ifHandTip.active=!1;else{let e=u.MModel.Battle.ifLevelTasks.find(e=>0==e.complete);this.ifHandTip.active=!!e}this.gameModel.node.children[0].active=!1,this.gameModel.node.children[1].active=!1,this.scheduleOnce(()=>{this.gameModel.node.children[0].active=!0,this.gameModel.node.children[1].active=!0}),"cn"==c.MConfig.Language?this.chapter.string=`\u7b2c${Utils.numberToChinese(o)}\u7ae0 ${this.cnChapterNames[(o-1)%this.cnChapterNames.length]}`:"tc"==c.MConfig.Language?this.chapter.string=`\u7b2c${Utils.numberToChinese(o)}\u7ae0 ${this.tcChapterNames[(o-1)%this.tcChapterNames.length]}`:"en"!=c.MConfig.Language&&"pt"!=c.MConfig.Language&&"vi"!=c.MConfig.Language&&"id"!=c.MConfig.Language||(this.chapter.string=`$Chapter${o} ${this.enChapterNames[(o-1)%this.enChapterNames.length]}`)}pageUp(e,t){r.MBundle.load({bundle:r.EBundle.Hall,path:u.MModel.Battle.gameModel==a.EGameModel.Normal?y.PageUpNormal:y.PageUpInfernal,type:sp.SkeletonData,onComplete:o=>{this.pageUpSkeleton.skeletonData=o,this.pageUpSkeleton.setAnimation(0,e,!1),this.pageUpSkeleton.setCompleteListener(()=>{this.pageUpSkeleton.setCompleteListener(null),t()})}})}turnLeft(){this.currentPage-1>=1&&(d.MAudio.playEffect(d.EAudio.TurnPage),this.pageSkeleton.node.active=!1,this.pageUp("right",()=>{this.loadPage(this.currentPage-1)}))}turnRight(){let e=u.MModel.Battle.getChapter();if(this.currentPage+1<=e)d.MAudio.playEffect(d.EAudio.TurnPage),this.pageSkeleton.node.active=!1,this.pageUp("left",()=>{this.loadPage(this.currentPage+1)});else{let t=u.MModel.Battle.getChapterTailLevel(e),o=c.MConfig.TableI18n.get(201013),i="";"cn"==c.MConfig.Language?i=o.cn:"tc"==c.MConfig.Language?i=o.tc:"en"!=c.MConfig.Language&&"pt"!=c.MConfig.Language&&"vi"!=c.MConfig.Language&&"id"!=c.MConfig.Language||(i=o.en),i=i.replace("ref1",t.toString()),f.MToast.showToast({title:i})}}onClickTurnLeft(){d.MAudio.playEffect(d.EAudio.Click),this.turnLeft()}onClickTurnRight(){d.MAudio.playEffect(d.EAudio.Click),this.turnRight()}update(){this.srengthCountdown.string=Utils.getTimeMS(u.MModel.Account.addSrengthCountdown);let e=(new Date).getTime(),t=Math.ceil(172800-(e-u.MModel.Gift.timeLimitStartTime)/1e3%172800);this.timeLimitCountDown.string=Utils.getTimeHMS(t)}updateStrength(){this.lbStrength.string=GA.formatNumber(u.MModel.Account.strength),u.MModel.Account.strength<c.MConfig.Config.MaxStrength?this.srengthCountdown.node.parent.active=!0:this.srengthCountdown.node.parent.active=!1}updateCoin(){this.lbCoin.string=GA.formatNumber(u.MModel.Account.coin)}updateGemstone(){this.lbGemstone.string=GA.formatNumber(u.MModel.Account.gemstone)}updateDiamond(){this.lbDiamond.string=GA.formatNumber(u.MModel.Account.diamond)}updateSeclectHeroInfo(){var e;if((null===(e=u.MModel.Hero.currentHero)||void 0===e?void 0:e.id)>-1){this.ndBtnSelectHeros[0].active=!0,this.ndBtnSelectHeros[1].active=!1;let e="";e=u.MModel.Hero.currentHero.skinId&&1!=u.MModel.Hero.currentHero.skinId?Utils.prefixZero(u.MModel.Hero.currentHero.skinId%u.MModel.Hero.currentHero.id,2).toString():"",r.MBundle.load({bundle:r.EBundle.Dialog,path:S["Hero"+u.MModel.Hero.currentHero.id]+e,type:cc.SpriteFrame,onComplete:e=>{this.displayHero.spriteFrame=e}}),this.selectHeroSiwtch.active=!0,cc.Tween.stopAllByTarget(this.selectHeroSiwtch),this.selectHeroSiwtch.angle=0,cc.tween(this.selectHeroSiwtch).by(.5,{angle:-180}).delay(1).union().repeatForever().start()}else this.ndBtnSelectHeros[0].active=!1,this.ndBtnSelectHeros[1].active=!0,this.displayHero.spriteFrame=null,this.selectHeroSiwtch.active=!1}updatePassInfo(){let e=this.ndBtnPass.getChildByName("progress").getChildByName("fill"),t=this.ndBtnPass.getChildByName("lbProgress").getComponent(cc.Label),o=this.ndBtnPass.getChildByName("gantan"),i=-1,n=-1,a=[...c.MConfig.TablePass.values()];a.forEach(e=>{null!=e.normal&&-1==u.MModel.SummerFunPass.normalReceivedList.indexOf(e.id)&&(-1==i?i=e.id:e.id<i&&(i=e.id)),null!=e.special&&-1==u.MModel.SummerFunPass.specialReceivedList.indexOf(e.id)&&(-1==n?n=e.id:e.id<n&&(n=e.id))});let s=Math.min(i,n),l=-1;-1==s?(l=a.reduce((e,t)=>e.exp>t.exp?e:t).exp,e.width=236,o.active=!1):(l=c.MConfig.TablePass.get(s).exp,u.MModel.SummerFunPass.exp>=l?(o.active=!0,v.MTween.jelly(o),e.width=236):(o.active=!1,e.width=Math.max(.01,u.MModel.SummerFunPass.exp)/l*236)),t.string=`${u.MModel.SummerFunPass.exp}/${l}`}onClickAddDesktop(){d.MAudio.playEffect(d.EAudio.Click),g.MDialog.showDialog(r.EDialog.AddShortcut,{})}onClickMoreGame(){d.MAudio.playEffect(d.EAudio.Click),GA.isPlatform([GA.Platform.OPPO])?l.MAd.showGamePortalAd():GA.isPlatform(GA.Platform.Android)&&GA.Info.distributionChannel==GA.DistributionChannel.OPPO&&GA.PA.jumpLeisureSubject()}onClickNewbieTask(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u65b0\u624b\u4efb\u52a1\u6309\u94ae"}]),g.MDialog.showDialog(r.EDialog.NewbieTask,{data:u.MModel.NewbieTask})}onClickStartGame(){if(d.MAudio.playEffect(d.EAudio.Click),GA.isPlatform([GA.Platform.WeChat,GA.Platform.ByteDance,GA.Platform.OPPO])&&!u.MModel.Common.Register&&(u.MModel.Common.Register=!0,GA.AdTracking.reportKeyAction(GA.AdTracking.Action.Register)),u.MModel.Battle.gameModel==a.EGameModel.Normal)if(u.MModel.Account.checkPayStrength(5)){let e=new cc.Node;e.setParent(this.node),e.setPosition(cc.v2()),e.setContentSize(cc.winSize),e.addComponent(cc.BlockInputEvents),m.MPool.load({bundle:r.EBundle.Hall,path:"res/prefab/strength",type:cc.Prefab,onComplete:e=>{e.setParent(this.node),e.setPosition(this.node.convertToNodeSpaceAR(this.strengthStart.parent.convertToWorldSpaceAR(this.strengthStart.getPosition()))),e.zIndex=cc.macro.MAX_ZINDEX-11,cc.tween(e).to(1.5,{position:cc.v3(this.node.convertToNodeSpaceAR(this.strengthEnd.parent.convertToWorldSpaceAR(this.strengthEnd.getPosition())))},{easing:cc.easing.circOut}).call(()=>{u.MModel.Account.payStrength(5),u.MModel.Battle.gameEvent=a.EGameEvent.None,h.MEvent.emit(h.EMsg.TryPlayGame)}).start()}})}else if(c.MConfig.Transsion){let e=c.MConfig.TableI18n.get(201018);"cn"==c.MConfig.Language?f.MToast.showToast({title:e.cn}):"tc"==c.MConfig.Language?f.MToast.showToast({title:e.tc}):"pt"==c.MConfig.Language?f.MToast.showToast({title:e.pt}):"vi"==c.MConfig.Language?f.MToast.showToast({title:e.vi}):"id"==c.MConfig.Language?f.MToast.showToast({title:e.in}):f.MToast.showToast({title:e.en}),g.MDialog.showDialog(r.EDialog.Permanent,{})}else g.MDialog.showDialog(r.EDialog.FreeStrength,{});else u.MModel.Battle.gameModel==a.EGameModel.Infernal&&(u.MModel.Battle.setIfUseLevel(u.MModel.Battle.ifLevel),g.MDialog.showDialog(r.EDialog.LevelTask,{}))}onClickIfStartGame(){d.MAudio.playEffect(d.EAudio.Click),u.MModel.Battle.setIfUseLevel(u.MModel.Battle.ifLevel),g.MDialog.showDialog(r.EDialog.LevelTask,{})}onClickFreeStrength(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u514d\u8d39\u4f53\u529b\u6309\u94ae"}]),c.MConfig.Transsion?g.MDialog.showDialog(r.EDialog.Permanent,{}):g.MDialog.showDialog(r.EDialog.FreeStrength,{})}onClickFreeCoin(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u514d\u8d39\u91d1\u5e01\u6309\u94ae"}]),c.MConfig.Transsion?g.MDialog.showDialog(r.EDialog.Permanent,{}):g.MDialog.showDialog(r.EDialog.FreeCoin,{})}onClickFreeGemstone(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u514d\u8d39\u5b9d\u77f3\u6309\u94ae"}]),c.MConfig.Transsion?g.MDialog.showDialog(r.EDialog.Permanent,{}):g.MDialog.showDialog(r.EDialog.FreeGemstone,{})}onClickDiamond(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u94bb\u77f3\u6309\u94ae"}]),g.MDialog.showDialog(r.EDialog.Store,{})}onClickSelectHero(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u82f1\u96c4\u6309\u94ae"}]),g.MDialog.showDialog(r.EDialog.Hero,{data:u.MModel.Hero})}onClickBlindBox(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u76f2\u76d2\u6309\u94ae"}]),g.MDialog.showDialog(r.EDialog.BlindBox,{data:u.MModel.BlindBox}),this.guide.active=!1}onClickSignIn(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u7b7e\u5230\u6309\u94ae"}]),g.MDialog.showDialog(r.EDialog.SignIn,{data:u.MModel.SignIn})}onClickTask(){GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u4efb\u52a1"}]),g.MDialog.showDialog(r.EDialog.Task,{data:u.MModel.Task})}onClickSetting(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u8bbe\u7f6e"}]),g.MDialog.showDialog(r.EDialog.Setting,{data:u.MModel.Pause})}onClickStore(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u5546\u5e97"}]),g.MDialog.showDialog(r.EDialog.Store,{})}onClickPermanent(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u957f\u9a7b\u793c\u5305"}]),g.MDialog.showDialog(r.EDialog.Permanent,{})}onClickFirstImpulse(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u9996\u51b2\u793c\u5305"}]),g.MDialog.showDialog(r.EDialog.FirstImpulse,{})}onClickTimeLimit(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u9650\u65f6\u793c\u5305"}]),g.MDialog.showDialog(r.EDialog.TimeLimit,{})}onClickRank(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u6392\u884c\u699c"}]),g.MDialog.showDialog(r.EDialog.Rank,{})}onClickNoAds(){d.MAudio.playEffect(d.EAudio.Click),GA.isPlatform(GA.Platform.Android)?null===AppProxy||void 0===AppProxy||AppProxy.requestPayment("no_ad"):GA.isPlatform(GA.Platform.iOS)&&(null===AppProxy||void 0===AppProxy||AppProxy.requestPayment("NoAd"))}onClickOpenMenu(){d.MAudio.playEffect(d.EAudio.Click),this.ndBtnMenu.active=!1,cc.tween(this.menu).to(.3,{position:cc.v3(-270.5,0)}).call(()=>{this.ndBtnCloseMenu.active=!0}).start()}onClickCloseMenu(){d.MAudio.playEffect(d.EAudio.Click),this.ndBtnCloseMenu.active=!1,cc.tween(this.menu).to(.3,{position:cc.v3(-464,0)}).call(()=>{this.ndBtnMenu.active=!0}).start()}onClickKwaiVideo(){u.MModel.Common.KwaiVideoCheatCount++,this.kwaiVideo.active=!1,l.MAd.rewardOperation({tag:"\u5feb\u624b\u9a97\u70b9\u89c6\u9891",byVideo:!0,page:"\u5927\u5385",result:()=>{}})}onClickActivity(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u6bcd\u4eb2\u8282\u6309\u94ae"}]),g.MDialog.showDialog(r.EDialog.MothersDay,{})}onClickPass(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u901a\u884c\u8bc1\u6309\u94ae"}]),g.MDialog.showDialog(r.EDialog.Pass,{data:u.MModel.SummerFunPass})}onClickTower(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u5854\u697c\u4e4b\u6218"}]),r.MBundle.loadScene({bundle:r.EBundle.MineTower,scene:r.EScene.MineTower,onBeforeLoadScene:()=>{g.MDialog.clear()}})}onClickChangeToInfernal(){if(d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u5207\u5230\u5730\u72f1\u6a21\u5f0f"}]),u.MModel.Battle.level<=c.MConfig.Config.UnlockIfModelLevel){let e=c.MConfig.TableI18n.get(201015),t="";return"cn"==c.MConfig.Language?t=e.cn:"tc"==c.MConfig.Language?t=e.tc:"en"!=c.MConfig.Language&&"pt"!=c.MConfig.Language&&"vi"!=c.MConfig.Language&&"id"!=c.MConfig.Language||(t=e.en),t=t.replace("ref1",c.MConfig.Config.UnlockIfModelLevel.toString()),void f.MToast.showToast({title:t})}u.MModel.Battle.gameModel=a.EGameModel.Infernal,this.pageSkeleton.node.active=!1,this.statickBook.node.active=!1,this.turnPage.active=!1,this.bookmark.active=!1,cc.tween(this.ndBtnSelectHero).by(.15,{position:cc.v3(-200,0,0)}).start(),cc.tween(this.ndBtnModels).by(.15,{position:cc.v3(200,0,0)}).start(),cc.tween(this.ndBtnStartGames).to(.15,{scale:0}).start(),r.MBundle.load({bundle:r.EBundle.Hall,path:"res/spine/ChangeModel/skeleton",type:sp.SkeletonData,onComplete:e=>{this.changeModel.skeletonData=e,this.changeModel.setAnimation(0,"1to2",!1),this.changeModel.setCompleteListener(()=>{this.changeModel.setCompleteListener(null),this.loadPage(),this.turnPage.active=!0,this.setInfernalModel(),cc.tween(this.ndBtnSelectHero).by(.15,{position:cc.v3(200,0,0)}).start(),cc.tween(this.ndBtnModels).by(.15,{position:cc.v3(-200,0,0)}).start(),cc.tween(this.ndBtnStartGames).to(.15,{scale:1}).start()})}})}onClickChangeToNormal(){d.MAudio.playEffect(d.EAudio.Click),GA.sentLogs([{eventId:"\u9996\u9875\u70b9\u51fb\u5207\u5230\u666e\u901a\u6a21\u5f0f"}]),this.ifHandTip.active=!1,u.MModel.Battle.gameModel=a.EGameModel.Normal,this.pageSkeleton.node.active=!1,this.statickBook.node.active=!1,this.turnPage.active=!1,this.bookmark.active=!1,cc.tween(this.ndBtnSelectHero).by(.15,{position:cc.v3(-200,0,0)}).start(),cc.tween(this.ndBtnModels).by(.15,{position:cc.v3(200,0,0)}).start(),cc.tween(this.ndBtnStartGames).to(.15,{scale:0}).start(),r.MBundle.load({bundle:r.EBundle.Hall,path:"res/spine/ChangeModel/skeleton",type:sp.SkeletonData,onComplete:e=>{this.changeModel.skeletonData=e,this.changeModel.setAnimation(0,"2to1",!1),this.changeModel.setCompleteListener(()=>{this.changeModel.setCompleteListener(null),this.loadPage(),this.turnPage.active=!0,this.bookmark.active=!0,this.setNormalModel(),cc.tween(this.ndBtnSelectHero).by(.15,{position:cc.v3(200,0,0)}).start(),cc.tween(this.ndBtnModels).by(.15,{position:cc.v3(-200,0,0)}).start(),cc.tween(this.ndBtnStartGames).to(.15,{scale:1}).start()})}})}setInfernalModel(){this.ndBtnStartGames.getChildByName("btnNormalStartGame").active=!1,this.ndBtnStartGames.getChildByName("btnInfernalStartGame").active=!0,this.ndBtnModels.getChildByName("btnNormal").active=!0,this.ndBtnModels.getChildByName("btnInfernal").active=!1}setNormalModel(){this.ndBtnStartGames.getChildByName("btnNormalStartGame").active=!0,this.ndBtnStartGames.getChildByName("btnInfernalStartGame").active=!1,this.ndBtnModels.getChildByName("btnNormal").active=!1,this.ndBtnModels.getChildByName("btnInfernal").active=!0}updateBtnStatusSign(){return u.MModel.SignIn.isSignIned?(this.ndBtnSignIn.children[0].active=!1,this.ndEnBtnSignIn.children[0].active=!1,!1):(this.ndBtnSignIn.children[0].active=!0,this.ndEnBtnSignIn.children[0].active=!0,!0)}updateBtnStatusTask(){return u.MModel.Task.tasks.find(e=>e.receiveStatus==a.EReceiveStatus.UnReceive)?(this.ndBtnTask.children[0].active=!0,this.ndEnBtnTask.children[0].active=!0,!0):(this.ndBtnTask.children[0].active=!1,this.ndEnBtnTask.children[0].active=!1,!1)}updateBtnActivity(){return u.MModel.MothersDay.reward1Status==a.EReceiveStatus.UnReceive||u.MModel.MothersDay.reward2Status==a.EReceiveStatus.UnReceive||u.MModel.MothersDay.reward3Status==a.EReceiveStatus.UnReceive?(this.ndBtnActivity.children[0].active=!0,v.MTween.jelly(this.ndBtnActivity.children[0]),!0):(this.ndBtnActivity.children[0].active=!1,!1)}onClickTest(){g.MDialog.showDialog(r.EDialog.BlindBoxPrize,{data:{item:{id:7013,amount:1},source:a.ERewardSource.AddDesktop}}),p.MItem.getItem([{id:10004,amount:200}],1)}testShowModal(){GA.PA.showModal({title:"Tip",content:"Remote configuration acquisition failed, please try again!",showCancel:!1,confirmText:"Confirm",success:()=>{console.log("\u70b9\u51fb\u786e\u5b9a\uff01")}})}onClickInterstitial(){window.MiniGameAds.isInterstitialReady()?MiniGameAds.showInterstitial().then(()=>{console.info("====> show interstitial success")}).catch(e=>{console.error("====> show interstitial error: "+e.message)}):console.info("====> interstitial not ready")}onClickRewardedVideo(){window.MiniGameAds.isRewardvideoReady()?MiniGameAds.showRewardedVideo().then(()=>{console.info("====> show RewardedVideo success")}).catch(e=>{console.error("====> show RewardedVideo error: "+e.message)}):console.info("====> RewardedVideo not ready")}onDisable(){GA.Info.isPreview||"android_mgct_abroad_weiyou"!=GA.Info.appId||jsb.reflection.callStaticMethod("com.minigame.minicloudsdk.MiniGameSdk","hideCrossPromotionAd","()V"),this.pageTouch.targetOff(this),h.MEvent.targetOff(this)}};i([C(cc.Node)],k.prototype,"debuge",void 0),i([C(cc.Node)],k.prototype,"top",void 0),i([C(sp.Skeleton)],k.prototype,"pageSkeleton",void 0),i([C(sp.Skeleton)],k.prototype,"pageUpSkeleton",void 0),i([C(cc.Label)],k.prototype,"lbStrength",void 0),i([C(cc.Label)],k.prototype,"lbCoin",void 0),i([C(cc.Label)],k.prototype,"lbGemstone",void 0),i([C(cc.Label)],k.prototype,"lbDiamond",void 0),i([C(cc.Label)],k.prototype,"srengthCountdown",void 0),i([C(cc.Node)],k.prototype,"strengthStart",void 0),i([C(cc.Node)],k.prototype,"strengthEnd",void 0),i([C(cc.Button)],k.prototype,"btnTurnLeft",void 0),i([C(cc.Node)],k.prototype,"pageTouch",void 0),i([C(cc.Label)],k.prototype,"lbChapterLevel",void 0),i([C(cc.EditBox)],k.prototype,"editboxLevel",void 0),i([C(cc.Label)],k.prototype,"gameModel",void 0),i([C(cc.Label)],k.prototype,"chapter",void 0),i([C(cc.Node)],k.prototype,"loading",void 0),i([C(cc.Node)],k.prototype,"guide",void 0),i([C(cc.Node)],k.prototype,"ndBtnBlindBox",void 0),i([C(cc.Node)],k.prototype,"guideHand",void 0),i([C([cc.Node])],k.prototype,"ndBtnSelectHeros",void 0),i([C(cc.Sprite)],k.prototype,"displayHero",void 0),i([C([cc.Node])],k.prototype,"ksMoveBtns",void 0),i([C(cc.Node)],k.prototype,"ndBtnSignIn",void 0),i([C(cc.Node)],k.prototype,"ndEnBtnSignIn",void 0),i([C(cc.Sprite)],k.prototype,"statickBook",void 0),i([C(sp.Skeleton)],k.prototype,"changeModel",void 0),i([C(cc.Node)],k.prototype,"turnPage",void 0),i([C(cc.Node)],k.prototype,"bookmark",void 0),i([C(cc.Node)],k.prototype,"ndBtnMoreGame",void 0),i([C(cc.Node)],k.prototype,"ndBtnAddDesktop",void 0),i([C(cc.Node)],k.prototype,"ndBtnSelectHero",void 0),i([C(cc.Node)],k.prototype,"ndBtnStartGames",void 0),i([C(cc.Node)],k.prototype,"ndBtnModels",void 0),i([C(cc.Node)],k.prototype,"ndBtnTask",void 0),i([C(cc.Node)],k.prototype,"ndEnBtnTask",void 0),i([C(cc.Node)],k.prototype,"ifHandTip",void 0),i([C(cc.Node)],k.prototype,"ndBtnRnak",void 0),i([C(cc.Node)],k.prototype,"menu",void 0),i([C(cc.Node)],k.prototype,"ndBtnMenu",void 0),i([C(cc.Node)],k.prototype,"ndBtnCloseMenu",void 0),i([C(cc.Node)],k.prototype,"selectHeroSiwtch",void 0),i([C(cc.Node)],k.prototype,"noAds",void 0),i([C(cc.Node)],k.prototype,"ndBtnFirstImpulse",void 0),i([C(cc.Node)],k.prototype,"ndBtnTimeLimit",void 0),i([C(cc.Label)],k.prototype,"timeLimitCountDown",void 0),i([C(cc.Node)],k.prototype,"kwaiVideo",void 0),i([C(cc.Node)],k.prototype,"ndBtnSetting",void 0),i([C(cc.Node)],k.prototype,"ndBtnOverseasSetting",void 0),i([C(cc.Node)],k.prototype,"ndBtnActivity",void 0),i([C(cc.Node)],k.prototype,"ndBtnPass",void 0),i([C(cc.Node)],k.prototype,"ndBtnMineTower",void 0),i([C(cc.Node)],k.prototype,"ndBtnNewbieTask",void 0),i([C(cc.Node)],k.prototype,"newbieTaskSign",void 0),i([C(cc.Node)],k.prototype,"ndBtnPackage",void 0),i([C(cc.Node)],k.prototype,"menuBtnPackage",void 0),k=i([A],k),o.default=k,cc._RF.pop()},{"../../Script/Base/BaseScene":void 0,"../../Script/Enum":void 0,"../../Script/Interface/ITask":void 0,"../../Script/Manager/MAd":void 0,"../../Script/Manager/MAudio":void 0,"../../Script/Manager/MBundle":void 0,"../../Script/Manager/MConfig":void 0,"../../Script/Manager/MDialog":void 0,"../../Script/Manager/MEvent":void 0,"../../Script/Manager/MI18n":void 0,"../../Script/Manager/MItem":void 0,"../../Script/Manager/MModel":void 0,"../../Script/Manager/MPool":void 0,"../../Script/Manager/MToast":void 0,"../../Script/Manager/MTween":void 0,"../../Script/Temporary":void 0}],MoneyEffect:[function(e,t,o){"use strict";cc._RF.push(t,"33296lQU1hAIa8XsPZ7DA/b","MoneyEffect");var i=this&&this.__decorate||function(e,t,o,i){var n,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,o,s):n(t,o))||s);return a>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const n=e("../../Script/Manager/MAudio"),a=e("../../Script/Manager/MBundle"),s=e("../../Script/Manager/MEvent"),l=e("../../Script/Manager/MPool"),{ccclass:d,property:r}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.strength=null,this.coin=null,this.gemstone=null,this.diamond=null,this.startPos=cc.v2(0,-250)}onEnable(){s.MEvent.on(s.EMsg.CoinEffect,this.playCoinEffect,this),s.MEvent.on(s.EMsg.StrengthEffect,this.playStrengthEffect,this),s.MEvent.on(s.EMsg.GemstonEffect,this.playGemstoneEffect,this),s.MEvent.on(s.EMsg.DiamondEffect,this.playDiamondEffect,this)}playStrengthEffect(){this.scheduleOnce(()=>{n.MAudio.playEffect(n.EAudio.StrengthEffect)},1);let e=cc.v2(cc.Canvas.instance.node.convertToNodeSpaceAR(this.strength.parent.convertToWorldSpaceAR(this.strength.getPosition())));this.bezier(1,"res/prefab/strength",e),this.bezier(-1,"res/prefab/strength",e)}playCoinEffect(){this.scheduleOnce(()=>{n.MAudio.playEffect(n.EAudio.CoinEffect)},1);let e=cc.v2(cc.Canvas.instance.node.convertToNodeSpaceAR(this.coin.parent.convertToWorldSpaceAR(this.coin.getPosition())));this.bezier(1,"res/prefab/coin",e),this.bezier(-1,"res/prefab/coin",e)}playGemstoneEffect(){this.scheduleOnce(()=>{n.MAudio.playEffect(n.EAudio.CoinEffect)},1);let e=cc.v2(cc.Canvas.instance.node.convertToNodeSpaceAR(this.gemstone.parent.convertToWorldSpaceAR(this.gemstone.getPosition())));this.bezier(1,"res/prefab/gemstone",e),this.bezier(-1,"res/prefab/gemstone",e)}playDiamondEffect(){this.scheduleOnce(()=>{n.MAudio.playEffect(n.EAudio.CoinEffect)},1);let e=cc.v2(cc.Canvas.instance.node.convertToNodeSpaceAR(this.diamond.parent.convertToWorldSpaceAR(this.diamond.getPosition())));this.bezier(1,"res/prefab/diamond",e),this.bezier(-1,"res/prefab/diamond",e)}bezier(e,t,o){for(let i=0;i<15;i++){let i=o.sub(this.startPos).normalize(),n=e*(60*Math.random()+30),s=n*Math.PI/180,d=i.mul(600*Math.random()).rotate(s).add(this.startPos);l.MPool.load({bundle:a.EBundle.Hall,path:t,type:cc.Prefab,onComplete:e=>{e.setParent(this.node),e.setPosition(this.startPos),e.zIndex=cc.macro.MAX_ZINDEX,cc.tween(e).bezierTo(.8+Math.abs(n/90),this.startPos,d,o).call(()=>{l.MPool.recovery(e)}).start()}})}}onDisable(){s.MEvent.targetOff(this)}};i([r(cc.Node)],c.prototype,"strength",void 0),i([r(cc.Node)],c.prototype,"coin",void 0),i([r(cc.Node)],c.prototype,"gemstone",void 0),i([r(cc.Node)],c.prototype,"diamond",void 0),c=i([d],c),o.default=c,cc._RF.pop()},{"../../Script/Manager/MAudio":void 0,"../../Script/Manager/MBundle":void 0,"../../Script/Manager/MEvent":void 0,"../../Script/Manager/MPool":void 0}]},{},["HallScene","MoneyEffect"]);